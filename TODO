TODO: fix problems about layout